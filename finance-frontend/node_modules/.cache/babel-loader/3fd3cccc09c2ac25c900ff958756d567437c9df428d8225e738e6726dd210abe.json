{"ast":null,"code":"var _jsxFileName = \"D:\\\\financial_project\\\\finance-frontend\\\\src\\\\FinanceScreen.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport './App.css';\nimport { Spin, Divider, Typography, Button, Modal } from 'antd';\nimport axios from 'axios';\nimport TransactionList from \"./components/TransactionList\";\nimport AddItem from \"./components/AddItem\";\nimport moment from 'moment';\nimport Edit from './components/EditItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.baseURL = process.env.REACT_APP_BASE_URL || \"http://localhost:1337\";\nconst URL_TXACTIONS = '/api/txactions';\nfunction FinanceScreen() {\n  _s();\n  const [currentAmount, setCurrentAmount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [transactionData, setTransactionData] = useState([]);\n  const [isOpened, setIsOpened] = useState([false]);\n  const fetchItems = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.get(URL_TXACTIONS);\n      setTransactionData(response.data.data.map(data => ({\n        id: data.id,\n        key: data.id,\n        ...data.attributes\n      })));\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const addItem = async item => {\n    try {\n      setIsLoading(true);\n      console.log(item);\n      const params = {\n        ...item,\n        action_datetime: moment()\n      };\n      const response = await axios.post(URL_TXACTIONS, {\n        data: params\n      });\n      const {\n        id,\n        attributes\n      } = response.data.data;\n      setTransactionData([...transactionData, {\n        id: id,\n        key: id,\n        ...attributes\n      }]);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const editItem = item => {\n    console.log(item);\n    setIsOpened(false);\n  };\n  const deleteItem = async itemId => {\n    console.log(itemId);\n    try {\n      setIsLoading(true);\n      await axios.delete(`${URL_TXACTIONS}/${itemId}`);\n      fetchItems();\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchItems();\n  }, []);\n  useEffect(() => {\n    setCurrentAmount(transactionData.reduce((sum, data) => sum = data.type === \"income\" ? sum + data.amount : sum - data.amount, 0));\n  }, [transactionData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {\n        spinning: isLoading,\n        children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n          children: [\"\\u0E08\\u0E4D\\u0E32\\u0E19\\u0E27\\u0E19\\u0E40\\u0E07\\u0E34\\u0E19\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19 \", currentAmount, \" \\u0E1A\\u0E32\\u0E17\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AddItem, {\n          onItemAdded: addItem\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E23\\u0E32\\u0E22\\u0E23\\u0E31\\u0E1A-\\u0E23\\u0E32\\u0E22\\u0E08\\u0E48\\u0E32\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TransactionList, {\n          data: transactionData,\n          onTransactionDeleted: deleteItem,\n          onTransactionEdited: editItem\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Edit, {\n          isOpened: () => isOpened\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}\n_s(FinanceScreen, \"bX84fZRveJtnYV8r8MPgi+FkTqA=\");\n_c = FinanceScreen;\nexport default FinanceScreen;\nvar _c;\n$RefreshReg$(_c, \"FinanceScreen\");","map":{"version":3,"names":["useState","useEffect","Spin","Divider","Typography","Button","Modal","axios","TransactionList","AddItem","moment","Edit","jsxDEV","_jsxDEV","defaults","baseURL","process","env","REACT_APP_BASE_URL","URL_TXACTIONS","FinanceScreen","_s","currentAmount","setCurrentAmount","isLoading","setIsLoading","transactionData","setTransactionData","isOpened","setIsOpened","fetchItems","response","get","data","map","id","key","attributes","err","console","log","addItem","item","params","action_datetime","post","editItem","deleteItem","itemId","delete","reduce","sum","type","amount","className","children","spinning","Title","fileName","_jsxFileName","lineNumber","columnNumber","onItemAdded","onTransactionDeleted","onTransactionEdited","_c","$RefreshReg$"],"sources":["D:/financial_project/finance-frontend/src/FinanceScreen.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { Spin, Divider, Typography, Button, Modal } from 'antd';\r\nimport axios from 'axios'\r\nimport TransactionList from \"./components/TransactionList\";\r\nimport AddItem from \"./components/AddItem\";\r\nimport moment from 'moment';\r\nimport Edit from './components/EditItem';\r\n\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_BASE_URL || \"http://localhost:1337\"\r\nconst URL_TXACTIONS = '/api/txactions'\r\n\r\nfunction FinanceScreen() {\r\n    const [currentAmount, setCurrentAmount] = useState(0)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [transactionData, setTransactionData] = useState([])\r\n    const [isOpened, setIsOpened] = useState([false])\r\n\r\n    const fetchItems = async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            const response = await axios.get(URL_TXACTIONS)\r\n\r\n            setTransactionData(response.data.data.map(data => ({\r\n                id: data.id,\r\n                key: data.id,\r\n                ...data.attributes\r\n            })))\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally { setIsLoading(false) }\r\n    }\r\n\r\n    const addItem = async (item) => {\r\n        try {\r\n            setIsLoading(true)\r\n            console.log(item);\r\n            const params = { ...item, action_datetime: moment() }\r\n            const response = await axios.post(URL_TXACTIONS, { data: params })\r\n            const { id, attributes } = response.data.data\r\n\r\n            setTransactionData([\r\n                ...transactionData,\r\n                {\r\n                    id: id,\r\n                    key: id,\r\n                    ...attributes\r\n                }\r\n            ])\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const editItem = (item) => {\r\n        console.log(item)\r\n        setIsOpened(false)\r\n    }\r\n\r\n    const deleteItem = async (itemId) => {\r\n        console.log(itemId)\r\n        try {\r\n            setIsLoading(true)\r\n            await axios.delete(`${URL_TXACTIONS}/${itemId}`)\r\n            fetchItems()\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchItems()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setCurrentAmount(transactionData.reduce(\r\n            (sum, data) => sum = data.type === \"income\" ? sum + data.amount : sum - data.amount, 0))\r\n    }, [transactionData])\r\n\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <header className=\"App-header\">\r\n                <Spin spinning={isLoading}>\r\n                    <Typography.Title>\r\n                        จํานวนเงินปัจจุบัน {currentAmount} บาท\r\n                    </Typography.Title>\r\n                    <AddItem onItemAdded={addItem} />\r\n                    <Divider>บันทึกรายรับ-รายจ่าย</Divider>\r\n                    <TransactionList data={transactionData}\r\n                        onTransactionDeleted={deleteItem}\r\n                        onTransactionEdited={editItem}\r\n                    />\r\n                    <Edit isOpened={() => isOpened}></Edit>\r\n                </Spin>\r\n            </header>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FinanceScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}