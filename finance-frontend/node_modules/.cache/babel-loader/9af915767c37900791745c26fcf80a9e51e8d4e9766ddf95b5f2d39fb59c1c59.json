{"ast":null,"code":"var _jsxFileName = \"D:\\\\financial_project\\\\finance-frontend\\\\src\\\\LoginScreen.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { Button, Form, Input, Alert } from 'antd';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL_AUTH = \"/api/auth/local\";\nexport default function LoginScreen(props) {\n  _s();\n  const [isLoading, setIsLoading] = useState(false);\n  const [errMsg, setErrMsg] = useState(null);\n  const handleLogin = async formData => {\n    try {\n      setIsLoading(true);\n      setErrMsg(null);\n      const response = await axios.post(URL_AUTH, {\n        ...formData\n      });\n      const token = response.data.jwt;\n      axios.defaults.headers.common = {\n        'Authorization': `bearer ${token}`\n      };\n      props.onLoginSuccess();\n    } catch (err) {\n      console.log(err);\n      setErrMsg(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onFinish: handleLogin,\n    autoComplete: \"off\",\n    children: [errMsg && /*#__PURE__*/_jsxDEV(Form.Item, {\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        message: errMsg,\n        type: \"error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Username\",\n      name: \"identifier\",\n      rules: [{\n        required: true\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Password\",\n      name: \"password\",\n      rules: [{\n        required: true\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input.Password, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        loading: isLoading,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginScreen, \"jwPeaKWdyO4JS74EJhAyE35pqjA=\");\n_c = LoginScreen;\nvar _c;\n$RefreshReg$(_c, \"LoginScreen\");","map":{"version":3,"names":["useState","Button","Form","Input","Alert","axios","jsxDEV","_jsxDEV","URL_AUTH","LoginScreen","props","_s","isLoading","setIsLoading","errMsg","setErrMsg","handleLogin","formData","response","post","token","data","jwt","defaults","headers","common","onLoginSuccess","err","console","log","message","onFinish","autoComplete","children","Item","type","fileName","_jsxFileName","lineNumber","columnNumber","label","name","rules","required","Password","htmlType","loading","_c","$RefreshReg$"],"sources":["D:/financial_project/finance-frontend/src/LoginScreen.js"],"sourcesContent":["import { useState } from 'react';\nimport { Button, Form, Input, Alert } from 'antd';\nimport axios from 'axios'\n\nconst URL_AUTH = \"/api/auth/local\"\n\nexport default function LoginScreen(props) {\n\n  const [isLoading, setIsLoading] = useState(false)\n  const [errMsg, setErrMsg] = useState(null)\n\n  const handleLogin = async (formData) => {\n    try {\n      setIsLoading(true)\n      setErrMsg(null)\n      const response = await axios.post(URL_AUTH, {...formData})\n      const token = response.data.jwt\n      axios.defaults.headers.common = { 'Authorization': `bearer ${token}` }\n      props.onLoginSuccess();\n    } catch (err) {\n      console.log(err)\n      setErrMsg(err.message)\n    } finally { setIsLoading(false) }\n  }\n\n  return (\n    <Form\n      onFinish={handleLogin}\n      autoComplete=\"off\">\n      {errMsg &&\n        <Form.Item>\n          <Alert message={errMsg} type=\"error\" />\n        </Form.Item>\n      }\n\n      <Form.Item\n        label=\"Username\"\n        name=\"identifier\"\n        rules={[{ required: true, }]}>\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Password\"\n        name=\"password\"\n        rules={[{ required: true },]}>\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item>\n        <Button\n          type=\"primary\"\n          htmlType=\"submit\" loading={isLoading}>\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}