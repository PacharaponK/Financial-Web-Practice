{"ast":null,"code":"var _jsxFileName = \"D:\\\\financial_project\\\\finance-frontend\\\\src\\\\FinanceScreen.js\",\n  _s2 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport './App.css';\nimport { Spin, Divider, Typography, Button, Modal } from 'antd';\nimport axios from 'axios';\nimport TransactionList from \"./components/TransactionList\";\nimport AddItem from \"./components/AddItem\";\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.baseURL = process.env.REACT_APP_BASE_URL || \"http://localhost:1337\";\nconst URL_TXACTIONS = '/api/txactions';\nfunction FinanceScreen() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [currentAmount, setCurrentAmount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [transactionData, setTransactionData] = useState([]);\n  const fetchItems = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.get(URL_TXACTIONS);\n      setTransactionData(response.data.data.map(data => ({\n        id: data.id,\n        key: data.id,\n        ...data.attributes\n      })));\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const addItem = async item => {\n    try {\n      setIsLoading(true);\n      console.log(item);\n      const params = {\n        ...item,\n        action_datetime: moment()\n      };\n      const response = await axios.post(URL_TXACTIONS, {\n        data: params\n      });\n      const {\n        id,\n        attributes\n      } = response.data.data;\n      setTransactionData([...transactionData, {\n        id: id,\n        key: id,\n        ...attributes\n      }]);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const editItem = item => {\n    _s();\n    console.log(item);\n    const deleteItem = async itemId => {\n      console.log(itemId);\n      try {\n        setIsLoading(true);\n        await axios.delete(`${URL_TXACTIONS}/${itemId}`);\n        fetchItems();\n      } catch (err) {\n        console.log(err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    useEffect(() => {\n      fetchItems();\n    }, []);\n    useEffect(() => {\n      setCurrentAmount(transactionData.reduce((sum, data) => sum = data.type === \"income\" ? sum + data.amount : sum - data.amount, 0));\n    }, [transactionData]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          spinning: isLoading,\n          children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n            children: [\"\\u0E08\\u0E4D\\u0E32\\u0E19\\u0E27\\u0E19\\u0E40\\u0E07\\u0E34\\u0E19\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19 \", currentAmount, \" \\u0E1A\\u0E32\\u0E17\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(AddItem, {\n            onItemAdded: addItem\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E23\\u0E32\\u0E22\\u0E23\\u0E31\\u0E1A-\\u0E23\\u0E32\\u0E22\\u0E08\\u0E48\\u0E32\\u0E22\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TransactionList, {\n            data: transactionData,\n            onTransactionDeleted: deleteItem,\n            onTransactionEdited: editItem\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this);\n  };\n  _s(editItem, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n}\n_s2(FinanceScreen, \"iHBtjoejZmLqpqESobigXK9Glh0=\");\n_c = FinanceScreen;\n;\nexport default FinanceScreen;\nvar _c;\n$RefreshReg$(_c, \"FinanceScreen\");","map":{"version":3,"names":["useState","useEffect","Spin","Divider","Typography","Button","Modal","axios","TransactionList","AddItem","moment","jsxDEV","_jsxDEV","defaults","baseURL","process","env","REACT_APP_BASE_URL","URL_TXACTIONS","FinanceScreen","_s2","_s","$RefreshSig$","currentAmount","setCurrentAmount","isLoading","setIsLoading","transactionData","setTransactionData","fetchItems","response","get","data","map","id","key","attributes","err","console","log","addItem","item","params","action_datetime","post","editItem","deleteItem","itemId","delete","reduce","sum","type","amount","className","children","spinning","Title","fileName","_jsxFileName","lineNumber","columnNumber","onItemAdded","onTransactionDeleted","onTransactionEdited","_c","$RefreshReg$"],"sources":["D:/financial_project/finance-frontend/src/FinanceScreen.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { Spin, Divider, Typography, Button, Modal } from 'antd';\r\nimport axios from 'axios'\r\nimport TransactionList from \"./components/TransactionList\";\r\nimport AddItem from \"./components/AddItem\";\r\nimport moment from 'moment';\r\n\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_BASE_URL || \"http://localhost:1337\"\r\nconst URL_TXACTIONS = '/api/txactions'\r\n\r\nfunction FinanceScreen() {\r\n    const [currentAmount, setCurrentAmount] = useState(0)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [transactionData, setTransactionData] = useState([])\r\n\r\n    const fetchItems = async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            const response = await axios.get(URL_TXACTIONS)\r\n\r\n            setTransactionData(response.data.data.map(data => ({\r\n                id: data.id,\r\n                key: data.id,\r\n                ...data.attributes\r\n            })))\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally { setIsLoading(false) }\r\n    }\r\n\r\n    const addItem = async (item) => {\r\n        try {\r\n            setIsLoading(true)\r\n            console.log(item);\r\n            const params = { ...item, action_datetime: moment() }\r\n            const response = await axios.post(URL_TXACTIONS, { data: params })\r\n            const { id, attributes } = response.data.data\r\n\r\n            setTransactionData([\r\n                ...transactionData,\r\n                {\r\n                    id: id,\r\n                    key: id,\r\n                    ...attributes\r\n                }\r\n            ])\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const editItem = (item) => {\r\n        console.log(item)\r\n\r\n        const deleteItem = async (itemId) => {\r\n            console.log(itemId)\r\n            try {\r\n                setIsLoading(true)\r\n                await axios.delete(`${URL_TXACTIONS}/${itemId}`)\r\n                fetchItems()\r\n            } catch (err) {\r\n                console.log(err)\r\n            } finally {\r\n                setIsLoading(false)\r\n            }\r\n        }\r\n\r\n        useEffect(() => {\r\n            fetchItems()\r\n        }, [])\r\n\r\n        useEffect(() => {\r\n            setCurrentAmount(transactionData.reduce(\r\n                (sum, data) => sum = data.type === \"income\" ? sum + data.amount : sum - data.amount, 0))\r\n        }, [transactionData])\r\n\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <header className=\"App-header\">\r\n                    <Spin spinning={isLoading}>\r\n                        <Typography.Title>\r\n                            จํานวนเงินปัจจุบัน {currentAmount} บาท\r\n                        </Typography.Title>\r\n                        <AddItem onItemAdded={addItem} />\r\n                        <Divider>บันทึกรายรับ-รายจ่าย</Divider>\r\n                        <TransactionList data={transactionData}\r\n                            onTransactionDeleted={deleteItem}\r\n                            onTransactionEdited={editItem}\r\n                        />\r\n                    </Spin>\r\n                </header>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nexport default FinanceScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}