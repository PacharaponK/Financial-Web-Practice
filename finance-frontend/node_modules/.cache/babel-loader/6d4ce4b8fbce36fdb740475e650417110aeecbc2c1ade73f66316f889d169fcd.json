{"ast":null,"code":"var _jsxFileName = \"D:\\\\financial_project\\\\finance-frontend\\\\src\\\\FinanceScreen.js\",\n  _s2 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport './App.css';\nimport { Spin, Divider, Typography, Button, Modal } from 'antd';\nimport axios from 'axios';\nimport TransactionList from \"./components/TransactionList\";\nimport AddItem from \"./components/AddItem\";\nimport moment from 'moment';\nimport Edit from './components/EditItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\naxios.defaults.baseURL = process.env.REACT_APP_BASE_URL || \"http://localhost:1337\";\nconst URL_TXACTIONS = '/api/txactions';\nfunction FinanceScreen() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [currentAmount, setCurrentAmount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const [transactionData, setTransactionData] = useState([]);\n  const fetchItems = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.get(URL_TXACTIONS);\n      setTransactionData(response.data.data.map(data => ({\n        id: data.id,\n        key: data.id,\n        ...data.attributes\n      })));\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const addItem = async item => {\n    try {\n      setIsLoading(true);\n      console.log(item);\n      const params = {\n        ...item,\n        action_datetime: moment()\n      };\n      const response = await axios.post(URL_TXACTIONS, {\n        data: params\n      });\n      const {\n        id,\n        attributes\n      } = response.data.data;\n      setTransactionData([...transactionData, {\n        id: id,\n        key: id,\n        ...attributes\n      }]);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const Edit = () => {\n    _s();\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const showModal = () => {\n      setIsModalOpen(true);\n    };\n    const handleOk = () => {\n      setIsModalOpen(false);\n    };\n    const handleCancel = () => {\n      setIsModalOpen(false);\n    };\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: showModal,\n        children: \"Open Modal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Basic Modal\",\n        open: isModalOpen,\n        onOk: handleOk,\n        onCancel: handleCancel,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Some contents...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Some contents...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Some contents...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  };\n  _s(Edit, \"mLsII5HRP5G63IA/8vjZ5YHXWr8=\");\n  const deleteItem = async itemId => {\n    console.log(itemId);\n    try {\n      setIsLoading(true);\n      await axios.delete(`${URL_TXACTIONS}/${itemId}`);\n      fetchItems();\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchItems();\n  }, []);\n  useEffect(() => {\n    setCurrentAmount(transactionData.reduce((sum, data) => sum = data.type === \"income\" ? sum + data.amount : sum - data.amount, 0));\n  }, [transactionData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {\n        spinning: isLoading,\n        children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n          children: [\"\\u0E08\\u0E4D\\u0E32\\u0E19\\u0E27\\u0E19\\u0E40\\u0E07\\u0E34\\u0E19\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19 \", currentAmount, \" \\u0E1A\\u0E32\\u0E17\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AddItem, {\n          onItemAdded: addItem\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          children: \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\\u0E23\\u0E32\\u0E22\\u0E23\\u0E31\\u0E1A-\\u0E23\\u0E32\\u0E22\\u0E08\\u0E48\\u0E32\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TransactionList, {\n          data: transactionData,\n          onTransactionDeleted: deleteItem,\n          onTransactionEdited: Edit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 9\n  }, this);\n}\n_s2(FinanceScreen, \"Qj4dRzhRbF2LJi9XixamAWchD0I=\");\n_c = FinanceScreen;\nexport default FinanceScreen;\nvar _c;\n$RefreshReg$(_c, \"FinanceScreen\");","map":{"version":3,"names":["useState","useEffect","Spin","Divider","Typography","Button","Modal","axios","TransactionList","AddItem","moment","Edit","jsxDEV","_jsxDEV","Fragment","_Fragment","defaults","baseURL","process","env","REACT_APP_BASE_URL","URL_TXACTIONS","FinanceScreen","_s2","_s","$RefreshSig$","currentAmount","setCurrentAmount","isLoading","setIsLoading","transactionData","setTransactionData","fetchItems","response","get","data","map","id","key","attributes","err","console","log","addItem","item","params","action_datetime","post","isModalOpen","setIsModalOpen","showModal","handleOk","handleCancel","children","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","title","open","onOk","onCancel","deleteItem","itemId","delete","reduce","sum","amount","className","spinning","Title","onItemAdded","onTransactionDeleted","onTransactionEdited","_c","$RefreshReg$"],"sources":["D:/financial_project/finance-frontend/src/FinanceScreen.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { Spin, Divider, Typography, Button, Modal } from 'antd';\r\nimport axios from 'axios'\r\nimport TransactionList from \"./components/TransactionList\";\r\nimport AddItem from \"./components/AddItem\";\r\nimport moment from 'moment';\r\nimport Edit from './components/EditItem';\r\n\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_BASE_URL || \"http://localhost:1337\"\r\nconst URL_TXACTIONS = '/api/txactions'\r\n\r\nfunction FinanceScreen() {\r\n    const [currentAmount, setCurrentAmount] = useState(0)\r\n\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [transactionData, setTransactionData] = useState([])\r\n\r\n    const fetchItems = async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            const response = await axios.get(URL_TXACTIONS)\r\n\r\n            setTransactionData(response.data.data.map(data => ({\r\n                id: data.id,\r\n                key: data.id,\r\n                ...data.attributes\r\n            })))\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally { setIsLoading(false) }\r\n    }\r\n\r\n    const addItem = async (item) => {\r\n        try {\r\n            setIsLoading(true)\r\n            console.log(item);\r\n            const params = { ...item, action_datetime: moment() }\r\n            const response = await axios.post(URL_TXACTIONS, { data: params })\r\n            const { id, attributes } = response.data.data\r\n\r\n            setTransactionData([\r\n                ...transactionData,\r\n                {\r\n                    id: id,\r\n                    key: id,\r\n                    ...attributes\r\n                }\r\n            ])\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const Edit = () => {\r\n        const [isModalOpen, setIsModalOpen] = useState(false);\r\n        const showModal = () => {\r\n            setIsModalOpen(true);\r\n        };\r\n        const handleOk = () => {\r\n            setIsModalOpen(false);\r\n        };\r\n        const handleCancel = () => {\r\n            setIsModalOpen(false);\r\n        };\r\n        return (\r\n            <>\r\n                <Button type=\"primary\" onClick={showModal}>\r\n                    Open Modal\r\n                </Button>\r\n                <Modal title=\"Basic Modal\" open={isModalOpen} onOk={handleOk} onCancel={handleCancel}>\r\n                    <p>Some contents...</p>\r\n                    <p>Some contents...</p>\r\n                    <p>Some contents...</p>\r\n                </Modal>\r\n            </>\r\n        );\r\n    };\r\n\r\n    const deleteItem = async (itemId) => {\r\n        console.log(itemId)\r\n        try {\r\n            setIsLoading(true)\r\n            await axios.delete(`${URL_TXACTIONS}/${itemId}`)\r\n            fetchItems()\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchItems()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setCurrentAmount(transactionData.reduce(\r\n            (sum, data) => sum = data.type === \"income\" ? sum + data.amount : sum - data.amount, 0))\r\n    }, [transactionData])\r\n\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <header className=\"App-header\">\r\n                <Spin spinning={isLoading}>\r\n                    <Typography.Title>\r\n                        จํานวนเงินปัจจุบัน {currentAmount} บาท\r\n                    </Typography.Title>\r\n                    <AddItem onItemAdded={addItem} />\r\n                    <Divider>บันทึกรายรับ-รายจ่าย</Divider>\r\n                    <TransactionList data={transactionData}\r\n                        onTransactionDeleted={deleteItem}\r\n                        onTransactionEdited={Edit} />\r\n                </Spin>\r\n            </header>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FinanceScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}